<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Memecoin Scanner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #fff;
      color: #000;
      transition: background 0.3s, color 0.3s;
    }

    .dark-mode {
      background: #121212;
      color: #f1f1f1;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px 12px;
      text-align: center;
    }

    th {
      background: #f4f4f4;
    }

    .dark-mode th {
      background: #333;
    }

    .criteria-false {
      color: crimson;
      font-weight: bold;
    }

    .criteria-true {
      color: green;
      font-weight: bold;
    }

    .toggle-btn {
      float: right;
      background: gold;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: bold;
    }

    h1 {
      display: inline-block;
    }

    ul {
      margin-top: 0;
    }

    .legend {
      margin-top: 30px;
    }

    .legend h3 {
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <button class="toggle-btn" onclick="toggleDarkMode()">ðŸŒ“ Toggle Dark Mode</button>
  <h1>ðŸ”¥ Live Memecoin Scanner (Top 5 on Solana)</h1>
  <p>Auto-refreshes every 60 seconds â€¢ Showing top 5 tokens.</p>

  <div id="table-container">
    <!-- Table will be loaded here -->
  </div>

  <div class="legend">
    <h3>ðŸ”· Criteria Definitions</h3>
    <ul>
      <li><strong>Criteria 1 â€“ Volume Spike:</strong> 5-min trading volume increased by more than 20%.</li>
      <li><strong>Criteria 2 â€“ Liquidity Growth:</strong> Pool size &gt; $10,000.</li>
      <li><strong>Criteria 3 â€“ Whale Buys:</strong> At least 4 buy transactions in 5 minutes.</li>
      <li><strong>Criteria 4 â€“ Price Surge:</strong> Rapid price growth (&gt; 0.1% in 5 minutes).</li>
      <li><strong>Criteria 5 â€“ Token Age:</strong> Token created within the last 48 hours.</li>
    </ul>
    <p style="font-size: small;">Â© Copyright by Gunawan Panjaitan</p>
  </div>

  <script>
    async function loadTable() {
      const res = await fetch("data/top_5_tokens.csv");
      const csv = await res.text();
      const lines = csv.trim().split("\n").map(l => l.split(","));
      const [header, ...rows] = lines;

      let html = "<table><thead><tr>";
      for (const h of header) {
        html += `<th>${h}</th>`;
      }
      html += "</tr></thead><tbody>";

      for (const row of rows) {
        html += "<tr>";
        row.forEach((cell, i) => {
          const isBool = cell === "TRUE" || cell === "FALSE";
          const val = isBool
            ? `<span class="${cell === "TRUE" ? "criteria-true" : "criteria-false"}">${
                cell === "TRUE" ? "âœ”" : "âœ˜"
              }</span>`
            : cell;
          html += `<td>${val}</td>`;
        });
        html += "</tr>";
      }

      html += "</tbody></table>";
      document.getElementById("table-container").innerHTML = html;
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    loadTable();
    setInterval(loadTable, 60000); // refresh every 60 sec
  </script>
</body>
</html>
